<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let user2 = {
        name: "john",
        age: 30,
      };

      let clone = {};
      for (let prop in user2) {
        // 속성을 생성하면서 대입
        clone[prop] = user2[prop];
      }

      clone.name = "petr";
      console.log(user2.name);

      let user = { name: "John" };

      let permissions1 = { name: "pete", canView: true };
      let permissions2 = { canEdit: true };

      // 기존 객체에 속성을 복사
      // Object.assign(대상객체, 소스객체, ...)
      // permissions1과 permissions2의 프로퍼티를 user로 복사합니다.
      Object.assign(user, permissions1, permissions2);
      console.log(user);

      // 새로운 객체를 생성
      // 대상객체가 새로운 객체니까
      // 대상 객체를 반환함
      const permissionedUser = Object.assign(
        {},
        user,
        permissions1,
        permissions2
      );
      console.log(permissionedUser);
      console.log(user === permissionedUser);

      // ...  : spread operator
      // 객체의 모든 속성을 열거해주는 연산 (const로 선언하면 불가함)
      // {} 객체 생성
      // {...user} user객체의 속성을 복사해서 객체 생성
      // 기존 객체의 속성값을 변경해줄 수도 있음 (마지막 줄)
      user = { ...user, ...permissions1, ...permissions2, name: "jin ah" };
      console.log(user);

      // user 객체 기반으로 신규객체 생성
      let clone2 = Object.assign({}, user);
      console.log(clone2);

      let clone3 = { ...user };
      console.log(clone3);

      // 객체를 복제, 하위 속성까지 복제
      // 대신에 함수는 복제 안 되는 방법
      // 객체 데이터 값만 있을 때 deepClone 하는 방법
      // JSON.stringify --> 객체를 문자열로 변환
      // JSON.parse --> 문자열을 객체로 변환
      // JSON -> javascript object notation (자바스크립트 객체 표기법)
      // 속성명은 "" 쌍따옴표로 감싸줌 "age" : 18
      // 문자열 속성값은 "" 쌍따옴표로만 사용
      let clone4 = JSON.parse(JSON.stringify(user));
      console.log(JSON.stringify(user)); // 문자열

      let obj = {
        name: "john",
        age: 23,
        skills: {
          codding: "javascript",
          sports: "football",
        },
      };
      let copyed = JSON.parse(JSON.stringify(obj));
      console.log(copyed);
      copyed.name = "jin ah";
      console.log("-------");
      console.log(obj);

      let person = {
        firstName: "ho jin",
        lastName: "Doe",
        // family: {
        //   per1: "one",
        //   per2: "two",
        // },
      };

      // let names = JSON.parse(JSON.stringify(person));
      let names = { ...person };
      names.firstName = "hoho";
      console.log(person);

      let students = [
        { name: "john", age: 21 },
        { name: "anna", age: 35 },
        { name: "max", age: 49 },
      ];

      // let studentsInfo = JSON.parse(JSON.stringify(students));
      let studentsInfo = { ...students };
      studentsInfo[0].name = "jin ah";
      studentsInfo[0].age = "27";
      console.log(students);
    </script>
  </body>
</html>
